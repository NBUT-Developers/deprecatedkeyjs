!function(){for(var o=window.location.host,a={callbacks:{},send:function(e,n){this.dispatchMessage("event",e,n)},sendCallback:function(n,i){var t=e.createEnvelope(n,"callback",i);this.dispatchMessage("callback",t,function(){})},triggerCallback:function(e,n){var i=this;setTimeout(function(){i.callbacks[e](n)},0)},dispatchMessage:function(i,n,t){this.callbacks[n.id]=function(e){t(e)};var o="jockey://"+i+"/"+n.id+"?"+encodeURIComponent(JSON.stringify(n)),e=document.createElement("iframe");e.setAttribute("src",o),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}},e={listeners:{},dispatcher:null,messageCount:0,on:function(e,n){(!this.listeners.hasOwnProperty(e)||!this.listeners[e]instanceof Array)&&(this.listeners[e]=[]),this.listeners[e].push(n)},off:function(e){(!this.listeners.hasOwnProperty(e)||!this.listeners[e]instanceof Array)&&(this.listeners[e]=[]),this.listeners[e]=[]},send:function(i,e,n){e instanceof Function&&(n=e,e=null),e=e||{},n=n||function(){};var t=this.createEnvelope(this.messageCount,i,e);this.dispatcher.send(t,n),this.messageCount+=1},isHooked:function(){return!0},trigger:function(c,t,o){var a=this,e=this.listeners[c]||[],s=0,r=function(n){s+=1,s>=e.length&&a.dispatcher.sendCallback(t,n)};if(0===e.length)a.dispatcher.sendCallback(t,{error:"NotFound"});else for(var n=0;n<e.length;n++){var i=e[n];i.length<=1?(i(o),r()):i(o,r)}},triggerCallback:function(n){var e=JSON.parse(n);this.dispatcher.triggerCallback(e.messageId,e.data)},createEnvelope:function(e,n,i){return{id:e,type:n,host:o,payload:i}}},s={send:function(n,e){e()},triggerCallback:function(){},sendCallback:function(){}},n=0,i=!1,t=["iPad","iPhone","iPod"];n<t.length;n++)if(navigator.platform.indexOf(t[n])>=0){i=!0;break}var r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),c=navigator.userAgent.toLowerCase().indexOf("android")>-1;i&&r||c?e.dispatcher=a:e.dispatcher=s,window.Jockey=e}(),function(){function t(e,i,t){n.has_Jockey?Jockey.send(e,i,t):a(e,i,t)}function o(e,i){n.has_Jockey?Jockey.on(e,i):s(e,i)}function a(t,e,n){e instanceof Function&&(n=e,e=null),e=e||{},n=n||function(){},function o(){if(window.CheNiu){if(!i[t])return;i[t](e,n)}else setTimeout(o,50)}()}function s(n,i){i=i||function(){},function t(){if(window.CheNiu){if(!e[n])return;e[n].polyfill?e[n].polyfill(i):i(e[n].payload,e[n].complete)}else setTimeout(t,50)}()}var n={send:t,on:o};n.has_Jockey=function(){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("jockey")&&-1!=e.indexOf("cheniu")}();var i={OpenVCBridge:function(e){window.location.href=e.protocol},PushWebVCBridge:function(e){var n=void 0===e.hasNav?!0:e.hasNav,i=void 0===e.hasCheNiu?!0:e.hasCheNiu,t=void 0===e.hasShare?!1:e.hasShare;CheNiu.openWebView(e.url,n,i,t)},ControlWebVCBridge:function(e){window.location.href="cheniu://webview/close"},UserBridge:function(t,i){var e="",n="";e=CheNiu.getToken(),n=CheNiu.getLoginName(),contactPhone=CheNiu.getPhoneNum(),i({userToken:e,userId:n,contactPhone:contactPhone})}},e={shareBridge:{payload:{},complete:function(e){e=e||{},e.enable=1,window.app_cheniu_share=e,window.CheNiu&&window.CheNiu.setShareInfo&&window.CheNiu.setShareInfo(JSON.stringify(window.app_cheniu_share))}},shareResultBridge:{payload:{},complete:function(){},polyfill:function(n){var e=this;window.CheNiu&&(window.CheNiu.shareSuccess=function(){e.payload.result=!0,n(e.payload,e.complete)})}}};window.Cockey=n}();
//# sourceMappingURL=yookey.min.map